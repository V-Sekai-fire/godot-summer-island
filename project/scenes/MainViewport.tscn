[gd_scene load_steps=9 format=2]

[ext_resource path="res://assets/fonts/UITextDefault.tres" type="DynamicFont" id=2]
[ext_resource path="res://assets/ui/Logo.png" type="Texture" id=3]
[ext_resource path="res://scenes/MainViewport.gd" type="Script" id=4]
[ext_resource path="res://maps/ShoreMap.tscn" type="PackedScene" id=5]

[sub_resource type="ViewportTexture" id=1]
viewport_path = NodePath("Viewport")

[sub_resource type="GDScript" id=2]
script/source = "extends Label

func _process(delta: float) -> void:
	text = print_perf()

func print_perf() -> String:
	var format := \"FPS: %d\\nDraw Calls: %d\\nVideo Mem: %.2f MiB\"

	var fps = Performance.get_monitor(Performance.TIME_FPS)
	var dc = Performance.get_monitor(Performance.RENDER_DRAW_CALLS_IN_FRAME)
	var vm = Performance.get_monitor(Performance.RENDER_VIDEO_MEM_USED) / (1024 * 1024)

	var out = format % [fps, dc, vm]
	
	return out
"

[sub_resource type="DynamicFontData" id=3]
font_path = "res://assets/fonts/NotoSans-Bold.ttf"

[sub_resource type="DynamicFont" id=4]
outline_size = 1
outline_color = Color( 0.0980392, 0.0980392, 0.0980392, 1 )
use_mipmaps = true
use_filter = true
font_data = SubResource( 3 )

[node name="MainView" type="ViewportContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
stretch = true
script = ExtResource( 4 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Container" type="Container" parent="."]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureRect" type="TextureRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
texture = SubResource( 1 )
expand = true
flip_v = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Viewport" type="Viewport" parent="."]
size = Vector2( 1280, 720 )
handle_input_locally = false
msaa = 2
render_target_update_mode = 3
audio_listener_enable_3d = true
shadow_atlas_size = 1024

[node name="ShoreMap" parent="Viewport" instance=ExtResource( 5 )]

[node name="DebugUI" type="Control" parent="."]
margin_right = 1280.0
margin_bottom = 720.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Logo" type="TextureRect" parent="DebugUI"]
visible = false
margin_left = 605.0
margin_top = 43.0
margin_right = 1885.0
margin_bottom = 763.0
texture = ExtResource( 3 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Performance" type="Label" parent="DebugUI"]
margin_left = 37.4783
margin_top = 27.1395
margin_right = 367.478
margin_bottom = 61.1395
custom_fonts/font = ExtResource( 2 )
text = "00"
script = SubResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ControlHelpPanel" type="ColorRect" parent="DebugUI"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_left = 23.2625
margin_top = -240.262
margin_right = 756.262
margin_bottom = -23.2625
color = Color( 0, 0, 0, 0.686275 )
__meta__ = {
"_edit_group_": true,
"_edit_use_anchors_": false
}

[node name="ControlHelp" type="Label" parent="DebugUI/ControlHelpPanel"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -348.0
margin_top = -89.5
margin_right = 348.0
margin_bottom = 89.5
custom_fonts/font = SubResource( 4 )
text = "** Control Help ** (Press F1 to show/hide this)
------
- Cursor toggle: R / Move: WASD + QE / Sprint: Shift / Flashlight: F
- Switch sky: 1 (day), 2 (night) / Toggle hall light: 3 / Toggle kitchen light: 4
- Capture screenshot: F10 (will be saved to '[Godot user folder]/Project Summer Island')
- Show/hide performace: F2
- You can change window size, no fullscreen right now, sorry!"
__meta__ = {
"_edit_use_anchors_": false
}
